<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Quagga2 Barcode Scanner</title>
</head>
<body>
  <div id="interactive" class="viewport"></div>
  <script src="https://cdn.jsdelivr.net/npm/@ericblade/quagga2/dist/quagga.js"></script>
  <script>
    // 获取需要扫描的容器元素
    const interactive = document.getElementById('interactive');

    // 配置 Quagga2
    Quagga.init({
      inputStream: {
        name: "Live",
        type: "LiveStream",
        target: interactive,
        constraints: {
          facingMode: "environment" // 启用后置摄像头
        },
      },
      decoder: {
        readers: ["code_128_reader"] // 支持的条码类型
      },
    });

    // 监听扫描结果
    Quagga.onDetected((result) => {
      // 解析扫描结果
      const barcode = result.codeResult.code;
      const barcodeFormat = result.codeResult.format;

      // 显示扫描结果
      alert(`Barcode Format: ${barcodeFormat}, Barcode Content: ${barcode}`);
    });

    // 启动扫描
    Quagga.start();

  </script>
</body>
</html>
